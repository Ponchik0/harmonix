# Безопасность Harmonix

## Конфигурация переменных окружения

Все чувствительные данные (API ключи, токены) должны храниться в файле `.env`, который **НЕ ДОЛЖЕН** коммититься в Git.

### Настройка

1. Скопируйте `.env.example` в `.env`:
   ```bash
   cp .env.example .env
   ```

2. Заполните свои значения в `.env`:
   - `VITE_SUPABASE_URL` - URL вашего Supabase проекта
   - `VITE_SUPABASE_ANON_KEY` - Публичный (anon) ключ Supabase
   - `VITE_DISCORD_CLIENT_ID` - Client ID вашего Discord приложения
   - `VITE_YOUTUBE_API_KEY` - API ключ YouTube Data API v3

### Важные замечания

#### Supabase
- **ANON KEY** - это публичный ключ, безопасный для клиентских приложений
- Он имеет ограниченные права через Row Level Security (RLS)
- **НИКОГДА** не используйте Service Role Key в клиентском коде!

#### Discord Client ID
- Client ID Discord приложения - это публичный идентификатор
- Он безопасен для использования в клиентских приложениях
- Не путайте с Client Secret (который должен быть секретным)

#### YouTube API Key
- Ограничьте использование ключа только для YouTube Data API v3
- Настройте ограничения по домену/IP в Google Cloud Console
- Установите квоты для предотвращения злоупотреблений

#### SoundCloud
- Токены SoundCloud извлекаются из публичного веб-приложения
- Они периодически обновляются автоматически
- Пользовательские токены можно настроить в интерфейсе приложения

## Что НЕ ДОЛЖНО попадать в Git

❌ Файлы `.env` с реальными значениями
❌ Приватные ключи (private keys)
❌ Service Role Keys от Supabase
❌ Client Secrets от OAuth приложений
❌ Пароли и токены доступа пользователей

## Что МОЖНО коммитить

✅ `.env.example` с примерами переменных
✅ Публичные Client ID
✅ Публичные Anon Keys (с правильно настроенным RLS)
✅ Конфигурационные файлы без секретов

## Проверка безопасности

Перед коммитом проверьте:
```bash
# Убедитесь что .env в .gitignore
git check-ignore .env

# Проверьте что нет секретов в staged файлах
git diff --cached | grep -i "secret\|password\|token\|key"
```

## Отчет о проблемах безопасности

Если вы обнаружили уязвимость безопасности, пожалуйста, НЕ создавайте публичный issue. Свяжитесь с разработчиками напрямую.
